[[plugins]]
repo = 'Shougo/ddu.vim'
depends = 'denops.vim'
hook_source = '''
call ddu#custom#patch_global(#{
    \   ui: 'ff',
    \   kindOptions: #{
    \     file: #{
    \       defaultAction: 'open',
    \     },
    \     word: #{
    \       defaultAction: 'append',
    \     },
    \   },
    \   sourceOptions: #{
    \     _: #{
    \       ignoreCase: v:true,
    \       matchers: ['matcher_substring'],
    \     },
    \   },
    \   sourceParams: #{
    \       file_external: #{
    \           cmd: ['git', 'log', '--all', '--graph', '-100', '--oneline']
    \       },
    \   },
    \   sources: [
    \     #{name: 'file_rec'},
    \     #{name: 'buffer'},
    \     #{name: 'file_external'},
    \     #{name: 'line'},
    \   ],
    \   uiParams: #{
    \     ff: #{
    \       autoResize: v:false,
    \       prompt: '>>> ',
    \       reversed: v:true,
    \       split: 'horizontal',
    \       startFilter: v:true,
    \       winHeight: '15',
    \     }
    \   },
    \ })
'''

[[plugins]]
repo = 'Shougo/ddu-commands.vim'
depends = 'ddu.vim'
on_cmd = 'Ddu'
hook_add = '''
  call extend(g:vimrc_altercmd_dic, {
    \ 'ddu': 'Ddu',
    \})
  " nnoremap <silent> <Space>du <Cmd>Ddu mr<CR>
  nnoremap <silent> <Space>db <Cmd>Ddu buffer<CR>
  nnoremap <silent> <Space>df <Cmd>Ddu file_rec<CR>
  " nnoremap <silent> *         <Cmd>Ddu -name=search line -resume=v:false -input=`expand('<cword>')` -ui-param-startFilter=v:false<CR>
'''

[[plugins]]
repo = 'Shougo/ddu-ui-ff'
on_source = 'ddu.vim'
[plugins.ftplugin]
ddu-ff = '''
setlocal cursorline

nnoremap <buffer><silent>         <CR>  <Cmd>call ddu#ui#ff#do_action('itemAction')<CR>
nnoremap <buffer><silent><nowait> q     <Cmd>call ddu#ui#ff#do_action('quit')<CR>
nnoremap <buffer><silent>         i     <Cmd>call ddu#ui#ff#do_action('openFilterWindow')<CR>
" nnoremap <buffer><silent><nowait> <Space> <Cmd>call ddu#ui#ff#do_action('toggleSelectItem')<CR>
'''
ddu-ff-filter = '''
" <CR> で itemAction にするか ddu-ff に戻るか便利な方を模索中。
" inoremap <buffer><silent> <CR>  <Esc><Cmd>call ddu#ui#ff#close()<CR><Cmd>call ddu#ui#ff#do_action('itemAction')<CR>
inoremap <buffer><silent> <CR>  <Esc><Cmd>call ddu#ui#ff#close()<CR>
" inoremap <buffer><silent> <Esc> <Esc><Cmd>call ddu#ui#ff#do_action('quit')<CR>
inoremap <buffer><silent> <Esc> <Esc><Cmd>call ddu#ui#ff#close()<CR>
inoremap <buffer><silent> <C-j> <Cmd>call ddu#ui#ff#execute("call cursor(line('.')+1,0)<Bar>redraw")<CR>
inoremap <buffer><silent> <C-n> <Cmd>call ddu#ui#ff#execute("call cursor(line('.')+1,0)<Bar>redraw")<CR>
inoremap <buffer><silent> <C-k> <Cmd>call ddu#ui#ff#execute("call cursor(line('.')-1,0)<Bar>redraw")<CR>
inoremap <buffer><silent> <C-p> <Cmd>call ddu#ui#ff#execute("call cursor(line('.')-1,0)<Bar>redraw")<CR>

nnoremap <buffer><silent> <CR>  <Cmd>call ddu#ui#ff#close()<CR>
nnoremap <buffer><silent> <Esc> <Cmd>call ddu#ui#ff#close()<CR>
'''

[[plugins]]
repo = 'shun/ddu-source-buffer'
on_source = 'ddu.vim'

[[plugins]]
repo = 'Shougo/ddu-source-line'
on_source = 'ddu.vim'

[[plugins]]
repo = 'Shougo/ddu-source-file_rec'
on_source = 'ddu.vim'

# [[plugins]]
# repo = 'kuuote/ddu-source-mr'
# on_source = 'ddu.vim'

[[plugins]]
repo = 'matsui54/ddu-source-file_external'
on_source = 'ddu.vim'

[[plugins]]
repo = 'Shougo/ddu-filter-matcher_substring'
on_source = 'ddu.vim'

[[plugins]]
repo = 'Shougo/ddu-kind-file'
on_source = 'ddu.vim'

[[plugins]]
repo = 'Shougo/ddu-kind-word'
on_source = 'ddu.vim'

