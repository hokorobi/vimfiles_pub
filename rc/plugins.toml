# Plugin Manager {{{1
[[plugins]]
repo = 'Shougo/dein.vim'
# memo
# on_source: ã“ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒãƒªã‚¹ãƒˆã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚ˆã‚Šå…ˆã«èª­ã¿è¾¼ã¾ã‚Œã‚‹
# depends: ãƒªã‚¹ãƒˆã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒã“ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚ˆã‚Šå…ˆã«èª­ã¿è¾¼ã¾ã‚Œã‚‹
# on_cmd: è‡ªåˆ†ã§å®šç¾©ã—ãŸã‚³ãƒãƒ³ãƒ‰ã¯ç™»éŒ²ã—ãªã„ã€‚ä¸€åº¦å®Ÿè¡Œã—ãŸã‚‰æ¶ˆãˆã‚‹ã¿ãŸã„ã€‚
hook_post_source = '''
  autocmd vimrc BufRead,InsertEnter */rc/*.toml call dein#toml#syntax()
'''

[[plugins]]
repo = 'hokorobi/vim-templug'
frozen = 1
on_cmd = 'Templug'
hook_add = '''
  set packpath+=~/_vim
'''

# }}}1  LSP {{{1
# é…å»¶èª­è¾¼ã‚’å®Ÿç¾ã—ã‚ˆã†ã¨ã™ã‚‹ã¨è‰²ã€…ã¨å¤§å¤‰ã€‚
[[plugins]]
repo = 'prabirshrestha/vim-lsp'
hook_add = '''
  " hook_source ã ã¨ã†ã¾ãå‹•ã‹ãªã‹ã£ãŸ

  " let g:lsp_log_verbose = 1
  " let g:lsp_log_file = expand('~/_vim/.log/vim-lsp.log')
  let g:lsp_diagnostics_float_cursor = 0
  let g:lsp_diagnostics_float_delay = 200
  let g:lsp_document_highlight_enabled = 0
  " A> éè¡¨ç¤º
  let g:lsp_document_code_action_signs_enabled = 0
  " Use denops-signature_help
  let g:lsp_signature_help_enabled = 0
  " do not use fold
  let g:lsp_fold_enabled = 0

  let g:lsp_diagnostics_echo_cursor = 0
  let g:lsp_diagnostics_virtual_text_enabled = 1
  let g:lsp_diagnostics_virtual_text_insert_mode_enabled = 0
  " let lsp_diagnostics_virtual_text_align = 'right'
  let g:lsp_diagnostics_virtual_text_padding_left = 2
  let g:lsp_diagnostics_virtual_text_prefix = "ğŸ› "
  " https://vim-jp.slack.com/archives/CQ57P4XU4/p1614523430139700
  function! s:lsp_format() abort
    silent LspDocumentFormatSync
    LspCodeActionSync source.organizeImports
  endfunction
  function! s:on_lsp_buffer_enabled() abort
    if &l:buftype isnot# '' || win_gettype() isnot# ''
      return
    endif

    setlocal omnifunc=lsp#complete
    setlocal signcolumn=yes

    " keymap
    nnoremap <buffer> <Space>al <plug>(lsp-document-diagnostics)
    " è¨€èªã«ã‚ˆã£ã¦ã¯ LS ãŒå¯¾å¿œã—ã¦ã„ãªã„æ©Ÿèƒ½ã‚‚ã‚ã‚Šã€ãã®å ´åˆã¯å…ƒã®æ©Ÿèƒ½ã‚’ä½¿ã„ãŸã„ã®ã§ç¢ºå®Ÿãªã‚‚ã®ã ã‘è¨­å®šã€‚
    if &filetype is# 'go' || &filetype is# 'python'
      nnoremap <buffer> K <plug>(lsp-hover)
      nnoremap <buffer> gd <plug>(lsp-definition)
      nnoremap <buffer> <C-]> <plug>(lsp-definition)
      nnoremap <buffer> <Space>ar <plug>(lsp-rename)
      nnoremap <buffer> <Space>aR <plug>(lsp-references)
    endif

    " submode
    call submode#enter_with('lsp', 'n', 'br', '<Space>aj', '<plug>(lsp-next-diagnostic-nowrap)')
    call submode#enter_with('lsp', 'n', 'br', '<Space>an', '<plug>(lsp-next-diagnostic-nowrap)')
    call submode#enter_with('lsp', 'n', 'br', '<Space>ak', '<plug>(lsp-previous-diagnostic-nowrap)')
    call submode#enter_with('lsp', 'n', 'br', '<Space>ap', '<plug>(lsp-previous-diagnostic-nowrap)')
    call submode#map('lsp', 'n', 'brs', 'j', '<plug>(lsp-next-diagnostic-nowrap)')
    call submode#map('lsp', 'n', 'brs', 'n', '<plug>(lsp-next-diagnostic-nowrap)')
    call submode#map('lsp', 'n', 'brs', 'k', '<plug>(lsp-previous-diagnostic-nowrap)')
    call submode#map('lsp', 'n', 'brs', 'p', '<plug>(lsp-previous-diagnostic-nowrap)')

    if &filetype is# 'go'
      augroup vimrc-plugin-lsp-ft-go
        autocmd! * <buffer>
        autocmd BufWritePre <buffer> call s:lsp_format()
      augroup END
    endif

    " For denops-signature_help
    call signature_help#enable()

  endfunction
  autocmd vimrc User lsp_buffer_enabled call s:on_lsp_buffer_enabled()
'''

[[plugins]]
repo = 'mattn/vim-lsp-settings'
depends = 'vim-lsp'
hook_add = '''
  let g:lsp_settings_servers_dir = expand('~/_vim/lspservers')
  let g:lsp_settings = {}
  " https://github.com/tsuyoshicho/vimrc-reading/blob/ad6df8bdac68ccbba4c0457797a1f9db56fcdca1/.vim/rc/dein.toml#L2928-L2941
  let g:lsp_settings['gopls'] = #{
    \  workspace_config: #{
    \    usePlaceholders: v:true,
    \    analyses: #{
    \      fillstruct: v:true,
    \    },
    \  },
    \  initialization_options: #{
    \    usePlaceholders: v:true,
    \    analyses: #{
    \      fillstruct: v:true,
    \    },
    \  },
    \}
  let g:lsp_settings['deno'] = #{
    \  blocklist: ['javascript'],
    \}
  let g:lsp_settings_enable_suggestions = 0
'''

[[plugins]]
repo = 'matsui54/denops-signature_help'
depends = 'denops.vim'
on_func = 'signature_help#'
hook_source = '''
  call signature_help#enable()
'''

# [[plugins]]
# repo = 'tsuyoshicho/vim-efm-langserver-settings'
# depends = 'vim-lsp'
# hook_add = '''
#   let g:efm_langserver_settings#filetype_whitelist = ['vim']
# '''

# }}}1  REPL {{{1

# Quickrun {{{2
[[plugins]]
repo = 'thinca/vim-quickrun'
on_cmd = 'QuickRun'
depends = 'shabadou.vim'
hook_add = '''
  call extend(g:vimrc_altercmd_dic, {
    \ 'qr\%[un]': 'Quickrun',
    \ 'r\%[un]': 'Quickrun',
    \})
'''
hook_source = '''
  let g:quickrun_config = get(g:, 'quickrun_config', {})
  let g:quickrun_config._ = {
        \   'runner': 'job',
        \   'outputter': 'buffer',
        \   'outputter/buffer/close_on_empty': 1,
        \ }

  let g:sayonara_filetypes.quickrun = 'bwipeout!'
'''

[[plugins]]
repo = 'osyo-manga/shabadou.vim'

# }}}2

[[plugins]]
repo = 'rhysd/reply.vim'
on_cmd = ['Repl', 'ReplAuto']

# }}}1  Text Object {{{1
[[plugins]]
repo = 'kana/vim-textobj-user'

[[plugins]]
repo = 'mattn/vim-textobj-url'
depends = 'vim-textobj-user'
on_map = {ox = ['iu', 'au']}

[[plugins]]
repo = 'machakann/vim-sandwich'
on_event = 'ModeChanged'
hook_add = '''
  let g:operator_sandwich_no_default_key_mappings = v:true

  BulkMap nx s <Nop>

  nnoremap sc  <Plug>(operator-sandwich-replace)<Plug>(operator-sandwich-release-count)<Plug>(textobj-sandwich-query-a)
  nnoremap scc <Plug>(operator-sandwich-replace)<Plug>(operator-sandwich-release-count)<Plug>(textobj-sandwich-auto-a)
  nnoremap cs  <Plug>(operator-sandwich-replace)<Plug>(operator-sandwich-release-count)<Plug>(textobj-sandwich-query-a)
  nnoremap css <Plug>(operator-sandwich-replace)<Plug>(operator-sandwich-release-count)<Plug>(textobj-sandwich-auto-a)
  BulkMap xo sc <Plug>(operator-sandwich-replace)

  nnoremap sr  <Plug>(operator-sandwich-replace)<Plug>(operator-sandwich-release-count)<Plug>(textobj-sandwich-query-a)
  nnoremap srr <Plug>(operator-sandwich-replace)<Plug>(operator-sandwich-release-count)<Plug>(textobj-sandwich-auto-a)
  " nnoremap rss <Plug>(operator-sandwich-replace)<Plug>(operator-sandwich-release-count)<Plug>(textobj-sandwich-auto-a)
  BulkMap xo sr <Plug>(operator-sandwich-replace)

  nnoremap sd  <Plug>(operator-sandwich-delete)<Plug>(operator-sandwich-release-count)<Plug>(textobj-sandwich-query-a)
  nnoremap sdd <Plug>(operator-sandwich-delete)<Plug>(operator-sandwich-release-count)<Plug>(textobj-sandwich-auto-a)
  nnoremap ds  <Plug>(operator-sandwich-delete)<Plug>(operator-sandwich-release-count)<Plug>(textobj-sandwich-query-a)
  nnoremap dss <Plug>(operator-sandwich-delete)<Plug>(operator-sandwich-release-count)<Plug>(textobj-sandwich-auto-a)
  BulkMap xo sd <Plug>(operator-sandwich-delete)

  nnoremap saa <Plug>(operator-sandwich-add)<Plug>(operator-sandwich-release-count)<Plug>(textobj-sandwich-auto-a)
  BulkMap nxo sa <Plug>(operator-sandwich-add)
  " https://github.com/machakann/vimrc/blob/3dc16ac1ae31197e35bebdf3f0fbf275117478bd/.vimrc#L1127-L1152
  nnoremap s( <Plug>(operator-sandwich-add-query1st)(
  nnoremap s8 <Plug>(operator-sandwich-add-query1st)(
  nnoremap s) <Plug>(operator-sandwich-add-query1st))
  nnoremap s9 <Plug>(operator-sandwich-add-query1st))
  xnoremap s( <Plug>(operator-sandwich-add)(
  xnoremap s8 <Plug>(operator-sandwich-add)(
  xnoremap s) <Plug>(operator-sandwich-add))
  xnoremap s9 <Plug>(operator-sandwich-add))
  nnoremap s[ <Plug>(operator-sandwich-add-query1st)[
  nnoremap s] <Plug>(operator-sandwich-add-query1st)]
  xnoremap s[ <Plug>(operator-sandwich-add)[
  xnoremap s] <Plug>(operator-sandwich-add)]
  nnoremap s{ <Plug>(operator-sandwich-add-query1st){
  nnoremap s} <Plug>(operator-sandwich-add-query1st)}
  xnoremap s{ <Plug>(operator-sandwich-add){
  xnoremap s} <Plug>(operator-sandwich-add)}
  nnoremap s" <Plug>(operator-sandwich-add-query1st)"
  nnoremap s2 <Plug>(operator-sandwich-add-query1st)"
  xnoremap s" <Plug>(operator-sandwich-add)"
  xnoremap s2 <Plug>(operator-sandwich-add)"
  nnoremap s' <Plug>(operator-sandwich-add-query1st)'
  nnoremap s7 <Plug>(operator-sandwich-add-query1st)'
  xnoremap s' <Plug>(operator-sandwich-add)'
  xnoremap s7 <Plug>(operator-sandwich-add)'
  nnoremap sf <Plug>(operator-sandwich-add-query1st)f
  xnoremap sf <Plug>(operator-sandwich-add)f
'''
hook_source = '''
  let g:textobj#sandwich#stimeoutlen = 100

  let g:sandwich#recipes = deepcopy(g:sandwich#default_recipes)
  let g:sandwich#recipes += [
        \   #{buns: ['ï¼ˆ', 'ï¼‰'], nesting: 1, input: ['j(', 'j)', 'jp']},
        \   #{buns: ['ã€Œ', 'ã€'], nesting: 1, input: ['j[', 'j]', 'jb']},
        \   #{buns: ['ã€', 'ã€'], nesting: 1, input: ['j{', 'j}', 'jB']},
        \   #{buns: ['ã€', 'ã€‘'], nesting: 1, input: ['j<', 'j>', 'jk']},
        \ ]

  " function surrouding ã‚’ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰ã§ãªãã‚¤ãƒ³ã‚µãƒ¼ãƒˆãƒ¢ãƒ¼ãƒ‰ã§ä½¿ã†
  " https://github.com/machakann/vim-sandwich/wiki/Magic-characters#function-surroundings
  let g:sandwich#recipes += [
        \   #{
        \     buns: ['(', ')'],
        \     cursor: 'head',
        \     command: ['startinsert'],
        \     kind: ['add', 'replace'],
        \     action: ['add'],
        \     input: ['f']
        \   },
        \ ]

  " å›²ã‚€ç¯„å›²ã®ä¸¡ç«¯ã®ã†ã¡ç‰‡æ–¹ãŒç©ºç™½ãªã‚‰ãã‚Œã‚’ç„¡è¦–ã™ã‚‹ã‚ˆã†ã«ç¯„å›²ã‚’ç¸®å°
  " saa ã‚’ä½¿ã†ãªã‚‰ä¸è¦ã‹ã‚‚ã€‚
  call operator#sandwich#set('add', 'char', 'skip_space', 1)
'''

[[plugins]]
repo = 'tommcdo/vim-exchange'
on_map = {n = 'cx', x = 'X'}

[[plugins]]
repo = 'kana/vim-textobj-indent'
depends = 'vim-textobj-user'
on_map = {ox = ['ii', 'ai', 'iI']}

[[plugins]]
repo = 'glts/vim-textobj-comment'
on_map = {ox = ['ac', 'aC', 'ic']}
depends = 'vim-textobj-user'

[[plugins]]
repo = 'romgrk/equal.operator'
on_map = {ox = ['<Plug>']}
hook_source = '''
  let g:equal_operator_default_mappings = 0

  onoremap i=h <Plug>(operator-lhs)
  onoremap a=h <Plug>(operator-Lhs)
  xnoremap i=h <Plug>(visual-lhs)
  xnoremap a=h <Plug>(visual-Lhs)

  onoremap i=l <Plug>(operator-rhs)
  onoremap a=l <Plug>(operator-Rhs)
  xnoremap i=l <Plug>(visual-rhs)
  xnoremap a=l <Plug>(visual-Rhs)
'''

[[plugins]]
repo = 'machakann/vim-textobj-functioncall'
on_map = {ox = ['<Plug>']}
on_souce = 'vim-sandwich'
hook_add = '''
  let g:textobj_functioncall_no_default_key_mappings = 1

  " func(arg)
  " <-------> af
  "      <-> if
  " https://scrapbox.io/vim-jp/sandwich,_textobj%E3%81%A7Generics%E3%82%92%E6%89%B1%E3%81%86
  xnoremap if <Plug>(textobj-functioncall-innerparen-i)
  onoremap if <Plug>(textobj-functioncall-innerparen-i)
  xnoremap af <Plug>(textobj-functioncall-i)
  onoremap af <Plug>(textobj-functioncall-i)
'''

[[plugins]]
repo = 'machakann/vim-textobj-delimited'
on_map = {ox = ['ad', 'aD', 'id', 'iD']}

[[plugins]]
repo = 'kana/vim-textobj-line'
on_map = {ox = ['al', 'il']}
hook_add = '''
  nmap <Space>yy "+yil
'''

# }}}1  Language, Format, Filetype {{{1

# diff {{{2
[[plugins]]
repo = 'AndrewRadev/linediff.vim'
on_cmd = 'Linediff'
hook_add = '''
  call extend(g:vimrc_altercmd_dic, {'diffl\%[ine]': 'Linediff'})
'''
hook_source = '''
  let g:linediff_modify_statusline = 0
'''

# }}}2 Python {{{2
[[plugins]]
repo = 'hdima/python-syntax'
hook_add = '''
  let g:python_hightlight_all = 1
'''

[[plugins]]
repo = 'hynek/vim-python-pep8-indent'

# }}}2 Golang {{{2
[[plugins]]
repo = 'mattn/vim-godoc'

[[plugins]]
repo = 'mattn/vim-gorun'

[[plugins]]
repo = 'mattn/vim-goaddtags'

# }}}2 Markdown {{{2
[[plugins]]
repo = 'previm/previm'
on_cmd = 'PrevimOpen'
depends = 'open-browser.vim'

[[plugins]]
repo = 'plasticboy/vim-markdown'
hook_source = '''
  " http://mattn.kaoriya.net/software/vim/20140523124903.htm
  let g:markdown_fenced_languages = [
        \   'css',
        \   'erb=eruby',
        \   'javascript',
        \   'js=javascript',
        \   'json=javascript',
        \   'ruby',
        \   'sass',
        \   'xml',
        \ ]
'''

# }}}2 rst {{{2
[[plugins]]
repo = 'hokorobi/vim-rst-util'
frozen = 1
on_ft = 'rst'
[plugins.ftplugin]
rst = '''
  nnoremap <buffer> <Space><Space>1 <Plug>(rst-section1)
  nnoremap <buffer> <Space><Space>2 <Plug>(rst-section2)
  nnoremap <buffer> <Space><Space>3 <Plug>(rst-section3)
  nnoremap <buffer> <Space><Space>4 <Plug>(rst-section4)
  nnoremap <buffer> <Space><Space>5 <Plug>(rst-section5)
  nnoremap <buffer> <Space><Space>6 <Plug>(rst-section6)

  inoremap <buffer> <C-CR> <Plug>(rst-insert-samebullet)
  inoremap <buffer> <S-CR> <Plug>(rst-insert-childbullet)
  inoremap <buffer> <C-S-CR> <Plug>(rst-insert-parentbullet)

  inoremap <buffer> <M-CR> <Plug>(rst-insert-lineblock)
'''

[[plugins]]
repo = 'habamax/vim-rst'
on_ft = 'rst'

# }}}2 quickfix {{{2
[[plugins]]
repo = 'lambdalisue/qfloc.vim'
on_ft = 'qf'
hook_add = '''
  " TODO: LSP ã‚’ä½¿ã‚ãªã„ filetype ã§ã¯æœ‰åŠ¹ã«ã™ã‚‹
  let g:qfloc_disable_sign = v:true
  let g:qfloc_disable_default_mappings = v:true
  let g:qfloc_disable_hover = v:true

  nnoremap Q <Plug>(qfloc-cswitch)
  nnoremap L <Plug>(qfloc-lswitch)
  " nnoremap <expr> ]c &diff ? ']c' : '<Plug>(qfloc-cnext)'
  " nnoremap <expr> [c &diff ? '[c' : '<Plug>(qfloc-cprevious)'
  " nnoremap ]l <Plug>(qfloc-lnext)
  " nnoremap [l <Plug>(qfloc-lprevious)
'''
[plugins.ftplugin]
qf = '''
  " qf.vim
  " nnoremap <buffer> j <Plug>(qfloc-j)
  " nnoremap <buffer> k <Plug>(qfloc-k)
  " nnoremap <buffer> s <Plug>(qfloc-sbuffer)
  " nnoremap <buffer> p <Plug>(qfloc-preview)
  nnoremap <buffer> u <Plug>(qfloc-undo)
  nnoremap <buffer> dd <Plug>(qfloc-delete)
  xnoremap <buffer> d  <Plug>(qfloc-delete)
'''

[[plugins]]
repo = 'thinca/vim-qfreplace'
on_cmd = 'Qfreplace'

# preview Quickfix at popup
[[plugins]]
repo = 'AndrewRadev/quickpeek.vim'
on_ft = 'qf'
[plugins.ftplugin]
qf = '''
  nnoremap <buffer> p <Cmd>QuickpeekToggle<CR>
'''

[[plugins]]
repo = 'mattn/vim-qfnavigate'
on_map = '<Plug>'
hook_add = '''
  nnoremap <silent> <F10> <plug>(qfnavigate-next)
  nnoremap <silent> <S-F10> <plug>(qfnavigate-previous)
  nnoremap <silent> <F11> <plug>(qfnavigate-previous)
'''

# QuickFixã§ã‚¸ãƒ£ãƒ³ãƒ—ã™ã‚‹ã¨ãã«ç›´å‰ã®Windowã‚’ä½¿ã†
[[plugins]]
repo = 'yssl/QFEnter'
on_ft = 'qf'

# }}}2 Vim {{{2
[[plugins]]
repo = 'vim-jp/syntax-vim-ex'

# Vim script ã®æœ€å¾Œã«ç™ºç”Ÿã—ãŸã‚¨ãƒ©ãƒ¼ã®ç®‡æ‰€ã‚’é–‹ã
[[plugins]]
repo = 'rbtnn/vim-vimscript_lasterror'
on_cmd = 'VimscriptLastError'

[[plugins]]
repo = 'rbtnn/vim-vimscript_tagfunc'
on_ft = 'vim'

[[plugins]]
repo = 'rbtnn/vim-vimscript_indentexpr'
on_ft = 'vim'

# }}}2 Others {{{2
[[plugins]]
repo = 'pangloss/vim-javascript'

[[plugins]]
repo = 'tsuyoshicho/plantuml-previewer.vim'
rev = '57dd426'
frozen = 1
depends = 'open-browser.vim'
on_cmd = 'PlantumlOpen'
hook_source = '''
  let g:plantuml_previewer#plantuml_jar_path = g:plantuml_path
'''

[[plugins]]
repo = 'hokorobi/plantuml-syntax'
# rev = 'dev'
frozen = 1
merged = 0

[[plugins]]
repo = 'hnamikaw/vim-autohotkey'

[[plugins]]
repo = 'mechatroner/rainbow_csv'
on_cmd = 'RainbowDelim'

# [[plugins]]
# repo = 'mattn/emmet-vim'
# on_ft = 'html'

[[plugins]]
repo = 'hokorobi/vim-howm-syntax-mini'
frozen = 1

[[plugins]]
repo = 'alvan/vim-closetag'
on_ft = ['html', 'xml']

#}}}2

# }}}1  Look {{{1
[[plugins]]
repo = 'rhysd/vim-color-spring-night'
hook_add = '''
  let g:spring_night_kill_italic = 1
  let g:spring_night_kill_bold = 1
'''

# ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ã‚¿ãƒ«ã‚µãƒ¼ãƒã®ä»¶æ•°ã‚’ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—è¡¨ç¤º
[[plugins]]
repo = 'obcat/vim-hitspop'
on_event = 'CmdlineEnter'
hook_source = '''
  let g:hitspop_line = 'winbot'
  let g:hitspop_column = 'winright'
  let g:hitspop_timeout = 100
  highlight link hitspopErrorMsg ErrorMsg
  highlight link hitspopNormal ErrorMsg
'''

[[plugins]]
repo = 'itchyny/lightline.vim'
depends = 'vim-color-spring-night'
hook_add = '''
  let g:unite_force_overwrite_statusline = 0
  let g:vimfiler_force_overwrite_statusline = 0
  let g:vimshell_force_overwrite_statusline = 0

  let g:lightline = #{
        \   colorscheme: 'spring_night',
        \   active: #{
        \     left: [['mode', 'paste'], ['readonly', 'filename', 'modified', 'pwd']],
        \     right: [['lineinfo'], ['fileformat', 'fenc', 'filetype']]
        \   },
        \   mode_map: {
        \     'n' : 'N',
        \     'i' : 'I',
        \     'R' : 'R',
        \     'v' : 'V',
        \     'V' : 'VL',
        \     "\<C-v>": 'VB',
        \     'c' : 'C',
        \     's' : 'S',
        \     'S' : 'SL',
        \     "\<C-s>": 'SB',
        \     't': 'T',
        \   },
        \   component: #{
        \     lineinfo: ':%-2v',
        \   },
        \   component_function: #{
        \     swap: 'Swap',
        \     pwd: 'getcwd',
        \     fenc: 'LightlineFenc',
        \     filename: 'LightlineFilename',
        \     fileformat: 'LightlineFileformat',
        \     filetype: 'LightlineFiletype',
        \   },
        \   component_type: #{
        \     buffers: 'tabsel',
        \   },
        \ }

  " https://github.com/thinca/config/blob/a8e3ee41236fcdbfcfa77c954014bc977bc6d1c6/dotfiles/dot.vim/vimrc#L378
  function! Swap()
    return get(b:, 'swapfile_exists', 0) ? 'swp' : ''
  endfunction

  function! LightlineFilename() abort
    " quickfixãƒªã‚¹ãƒˆã‚’ç”Ÿæˆã—ãŸã‚³ãƒãƒ³ãƒ‰ or ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåä»˜ã filename
    return &buftype ==# 'quickfix' ? get(w:, 'quickfix_title', '') : fnamemodify(bufname('%'), ':.')
  endfunction

  " BOM ã‚‚è¡¨ç¤ºã™ã‚‹ fenc
  function! LightlineFenc() abort
    if winwidth(0) < 70
      return ''
    endif

    let fenc = &fileencoding == '' ? &encoding : &fileencoding
    return fenc !=# 'utf-8' ? fenc : &bomb ? fenc .. ' (BOM)' : fenc
  endfunction

  function! LightlineFiletype() abort
    return winwidth(0) < 70 ? '' : &filetype ==# '' ? 'no ft' : &filetype
  endfunction

  function! LightlineFileformat() abort
    return winwidth(0) < 70 ? '' : &fileformat
  endfunction
'''

[[plugins]]
repo = 'itchyny/vim-cursorword'

# replace matchparen
[[plugins]]
repo = 'andymass/vim-matchup'
hook_add = '''
  " sandwich ã® ib ab ã‚’ä½¿ã†ãŸã‚ ds% cs% ã¯ç„¡åŠ¹ã«ã™ã‚‹
  let g:matchup_surround_enabled = 0

  " popup ã§è¡¨ç¤º
  let g:matchup_matchparen_offscreen = #{method: 'popup'}

  " é–¢æ•°å†…éƒ¨ã® return ãªã©ã«ç§»å‹•ã›ãšé–¢æ•°å…ˆé ­ã¨æœ«å°¾ã‚’è¡Œãæ¥ã™ã‚‹ã€‚
  let g:matchup_delim_nomids = 1

  BulkMap nxo <Space><Space> <Plug>(matchup-%)
'''

[[plugins]]
repo = 't9md/vim-quickhl'
on_map = '<Plug>'
hook_add = '''
  BulkMap nx <Space>m <Plug>(quickhl-manual-this)
  BulkMap nx <Space>M <Plug>(quickhl-manual-reset)
'''

# :substitute ãªã©ã§å¤‰æ›´å¯¾è±¡ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆã€å¤‰æ›´å¾Œã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
[[plugins]]
repo = 'markonm/traces.vim'
on_event = 'CmdlineEnter'
hook_source = '''
  let g:traces_num_range_preview = 1
  let g:traces_preview_window = 'botright 10new'
  let g:traces_normal_preview = 1
'''

[[plugins]]
repo = 'liuchengxu/vista.vim'
on_cmd = 'Vista'
hook_source = '''
  let g:sayonara_filetypes.vista = 'Vista!'
'''

[[plugins]]
repo = 'lambdalisue/readablefold.vim'

# #rrggbb ã‚„ #rgb ã®è‰²ã‚’è¦–è¦šåŒ–
[[plugins]]
repo = 'BourgeoisBear/clrzr'
on_cmd = 'ClrzrOn'
hook_add = '''
  " FIXME: ClrzrOn ã¨ ClrzrRefresh ã‚’é€£ç¶šå®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«
  call extend(g:vimrc_altercmd_dic, {
        \   'colorh\%[ighlight]': 'ClrzrOn | ClrzrRefresh',
        \ })
'''

[[plugins]]
repo = 'machakann/vim-highlightedyank'
hook_add = '''
  let g:highlightedyank_highlight_duration = 300
  highlight HighlightedyankRegion cterm=reverse gui=reverse
'''

[[plugins]]
repo = 'rbtnn/vim-ambiwidth'
hook_add = '''
  let g:ambiwidth_cica_enabled = v:false
  " Â«Â» é™¤å¤–
  let g:ambiwidth_add_list = [
  \   [0x00a1, 0x00aa, 2],
  \   [0x00ac, 0x00ba, 2],
  \   [0x00bc, 0x00ff, 2],
  \   [0x2010, 0x2026, 2],
  \ ]
'''

# }}}1  Input & Edit {{{1
[[plugins]]
repo = 'cohama/lexima.vim'
# rev = 'feature/feedkeys'
on_event = ['InsertEnter', 'CmdlineEnter']
hook_source = '''
  let g:lexima_ctrlh_as_backspace = 1
  " <Esc> ã¸ã®ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’æ´»ã‹ã™ãŸã‚ '' ã¸
  let g:lexima_map_escape = ''

  source ~/vimfiles/rc/lexima.vim
  " ç¶™ç¶šè¡Œã®æ”¹è¡Œæ™‚ã« \ ã‚’å…¥åŠ›ã™ã‚‹ãŸã‚
  autocmd vimrc FileType vim nmap <buffer> o A<CR>
'''

# https://scrapbox.io/vim-jp/lexima.vim%E3%81%A7Better_vim-altercmd%E3%82%92%E5%86%8D%E7%8F%BE%E3%81%99%E3%82%8B
[[plugins]]
repo = 'yuki-yano/lexima-alter-command.vim'
on_event = ['CmdlineEnter']
depends = 'lexima.vim'
hook_source = '''
  for [key, value] in items(g:vimrc_altercmd_dic)
    call lexima_alter_command#add_rule(key, value)
  endfor
'''

[[plugins]]
repo = 'thinca/vim-ambicmd'
on_event = ['CmdlineEnter']
depends = 'lexima.vim'
hook_source = '''
  "https://scrapbox.io/vim-jp/lexima%E3%81%A8ambicmd%E3%82%92cmdline%E3%81%A7%E4%BD%B5%E7%94%A8%E3%81%99%E3%82%8B
  function! s:expand_command(key) abort
    let key2char = { "\<Space>": ' ', "\<CR>": "\r" }
    let key2lexima = { "\<Space>": '<Space>', "\<CR>": '<CR>' }

    let lexima = lexima#expand(key2lexima[a:key], ':')
    if lexima !=# key2char[a:key]
      return lexima
    endif

    let ambicmd = ambicmd#expand(a:key)
    if ambicmd !=# key2char[a:key]
      return ambicmd
    endif

    return a:key
  endfunction

  cnoremap <expr> <Space> <SID>expand_command("\<Space>")
  cnoremap <expr> <CR>    <SID>expand_command("\<CR>")
'''

[[plugins]]
repo = 'uplus/vim-clurin'
on_map = '<Plug>'
hook_add = '''
  nnoremap + <Plug>(clurin-next)
  nnoremap - <Plug>(clurin-prev)
'''
# è¨­å®šã« ''' ãŒå…¥ã£ã¦ã„ã‚‹ã®ã§ """ """ ã§ããã‚‰ãªã„ã¨é§„ç›®ã€‚
hook_source = """
  let g:clurin = {
        \   '-': #{
        \     use_default: 0,
        \     def: [
        \       ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'],
        \       ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'],
        \       ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
        \       ['æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ', 'æ—¥'],
        \       ['true', 'false'],
        \       ['True', 'False'],
        \       ['on', 'off'],
        \       ['enable', 'disable'],
        \       ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
        \       ['yes', 'no'],
        \       ['left', 'right'],
        \       ['=', ' = '],
        \       ['+', ' + '],
        \       ['-', ' - '],
        \       ['*', ' * '],
        \       ['/', ' / '],
        \       ['pick', 'squash', 'fixup', 'reword', 'edit'],
        \   ]},
        \   'toml vim': #{
        \     def: [[
        \       #{pattern: '"\([^"]*\)"'  , replace: '"\1"'},
        \       #{pattern: '''\([^'']*\)''', replace: '''\1'''},
        \   ]]},
        \}
"""

[[plugins]]
repo = 'junegunn/vim-easy-align'
on_cmd = 'EasyAlign'
on_map = '<Plug>(EasyAlign'
hook_add = '''
  vnoremap <Enter> <Plug>(EasyAlign)
'''

[[plugins]]
repo = 'mbbill/undotree'
on_cmd = 'UndotreeToggle'
hook_add = '''
  nnoremap [toggle]u <Cmd>UndotreeToggle<CR>
  call extend(g:vimrc_altercmd_dic, {
        \   'undot\%[reetoggle]': 'UndotreeToggle',
        \ })
'''
hook_source = '''
  let g:undotree_WindowLayout = 2
  let g:undotree_SetFocusWhenToggle = 1
  let g:undotree_ShortIndicators = 1
'''

[[plugins]]
repo = 'osyo-manga/vim-jplus'
on_map = '<Plug>'
hook_add = '''
  " ç©ºç™½ã€è¡Œç¶™ç¶šã‚’å‰Šé™¤ã—ã¦è¡Œã‚’çµåˆ
  BulkMap nx J <Plug>(jplus)

  " ç©ºç™½ã‚’å‰Šé™¤ã—ãŸä¸Šã§ä»»æ„ã®æ–‡å­—ã‚’æŒ¿å…¥ã—ã¦è¡Œã‚’çµåˆ
  BulkMap nx <Space>J <Plug>(jplus-input)
'''

[[plugins]]
repo = 'hokorobi/yankround.vim'
on_map = {n = '<Space>f', nx = '<Plug>'}
on_cmd = 'CtrlPYankRound'
hook_add = '''
  BulkMap nx <expr> P yankround#is_active() ? '<Plug>(myyr)' : '<Plug>(yankround-P)'
  BulkMap nx <expr> p yankround#is_active() ? '<Plug>(myyr)' : '<Plug>(yankround-p)'
  nnoremap <Space>fp <Cmd>CtrlPYankRound<CR>

  let g:yankround_dir = expand('~/_vim/.yankround')
  let g:yankround_use_region_hl = 1
'''
hook_source = '''
  " submode
  call submode#enter_with('yr', 'n', 'r', '<Plug>(myyr)', '<Plug>(yankround-prev)')
  call submode#map('yr', 'n', 'rs', 'p', '<Plug>(yankround-prev)')
  call submode#map('yr', 'n', 'rs', 'n', '<Plug>(yankround-next)')
  call submode#map('yr', 'n', 'rs', 'P', '<Plug>(yankround-next)')
'''

# g<C-a> ãªã©ã¯åŒè¡Œã§ã®é€£ç•ªã¯ã§ããªã„ã‚ˆã†ãªã®ã§ã€ã¾ã æœ‰ç”¨
[[plugins]]
repo = 'deris/vim-rengbang'
on_cmd = ['RengBang', 'RengBangUsePrev', 'RengBangConfirm']
hook_source = '''
  let g:rengbang_default_start = 1
'''

[[plugins]]
repo = 'ntpeters/vim-better-whitespace'
on_cmd = ['StripWhitespace', 'ToggleStripWhitespaceOnSave']
hook_add = '''
  command! WhitespaceStrip :StripWhitespace
'''

[[plugins]]
repo = 'mattn/vim-sonictemplate'
on_cmd = 'Template'
on_map = {ni = '<C-y>'}
hook_add = '''
  let g:sonictemplate_vim_template_dir = [
    \   '$HOME/vimfiles/rc/sonictemplate',
    \   '$HOME/_vim/dein/repos/github.com/mattn/vim-sonictemplate/template',
    \]

  if exists('g:howm_dir') && isdirectory(g:howm_dir)
    nnoremap <Space>,c <Cmd>call plugin#sonictemplate#editHowmNew(g:howm_dir)<CR>
  endif

  autocmd vimrc FileType toml imap <buffer> <C-t> .plugin<C-R>=sonictemplate#postfix()<CR>
'''

[[plugins]]
repo = 'deris/vim-pasta'
on_map = {nx = ['<Space>p', '<Space>P']}
hook_source = '''
  let g:pasta_paste_before_mapping = '<Space>P'
  let g:pasta_paste_after_mapping = '<Space>p'
'''

[[plugins]]
repo = 'nocd5/ExpandSerialNumber.vim'
on_cmd = 'ExpandSerialNumber'

[[plugins]]
repo = 'lambdalisue/vim-findent'
on_cmd = ['Findent', 'FindentRestore']
hook_add = '''
  let g:findent#enable_messages = 0
  autocmd vimrc FileType autohotkey,javascript,json,neosnippet,plantuml,python,ruby,typescript,vim Findent
'''

[[plugins]]
repo = 'machakann/vim-swap'
on_map = {ox = ['<Plug>'], n = ['gs', 'g<', 'g>']}
hook_add = '''
  BulkMap xo i, <Plug>(swap-textobject-i)
  BulkMap xo a, <Plug>(swap-textobject-a)

  " è¡Œå†…ã®è¦ç´ ã‚’ã‚½ãƒ¼ãƒˆã™ã‚‹
  command! SortLine execute 'normal gss<ESC>'
'''
hook_source = '''
  " ã‚¿ãƒ–åŒºåˆ‡ã‚Šã‚‚è¦ç´ ã¨ã™ã‚‹ã€‚
  let g:swap#rules = deepcopy(g:swap#default_rules)
  let g:swap#rules += [#{
        \   delimiter: ['\t'],
        \   body: '\h\w*\(\t\h\w*\)\+',
        \ }]
'''

# é¸æŠã—ãŸè¡Œã™ã¹ã¦ã«å¯¾ã—ã¦ I, A ã‚’åæ˜ ã•ã›ã‚‹ã€‚
[[plugins]]
repo = 'kana/vim-niceblock'
on_map = {x = ['I', 'gI', 'A']}

[[plugins]]
repo = 'tyru/caw.vim'
depends = 'vim-repeat'
on_map = '<Plug>(caw:prefix)'
hook_add = '''
  BulkMap nx gc <Plug>(caw:prefix)
  " ç¾åœ¨è¡Œã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆ
  nmap gcy yypgcIk
  " é¸æŠç¯„å›²ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆ
  xmap gcy ygvgcIp
'''

[[plugins]]
repo = 'kana/vim-repeat'
lazy = 1

[[plugins]]
repo = 'matze/vim-move'
on_map = '<Plug>Move'
hook_add = '''
  let g:move_map_keys = 0
  nnoremap <C-Up> <Plug>MoveLineUp
  xnoremap <C-Up> <Plug>MoveBlockUp
  nnoremap <C-Down> <Plug>MoveLineDown
  xnoremap <C-Down> <Plug>MoveBlockDown
  nnoremap <A-l> <Plug>MoveCharRight
  xnoremap <A-l> <Plug>MoveBlockRight
  nnoremap <A-h> <Plug>MoveCharLeft
  xnoremap <A-h> <Plug>MoveBlockLeft
'''

[[plugins]]
repo = 'sentriz/vim-print-debug'
on_func = 'print_debug#print_debug'
hook_source = '''
  let g:print_debug_templates = #{
    \   go:         'fmt.Printf("+++ {}\n")',
    \   python:     'print(f"+++ {}")',
    \   javascript: 'console.log(`+++ {}`);',
    \   c:          'printf("+++ {}\n");',
    \   vim:        'echom "+++"',
    \ }
'''

# https://github.com/4513ECHO/dotfiles/blob/9e043064780a15f8926faeba42b49f8f4358a102/config/nvim/dein/plugin.toml#L569-L598
[[plugins]]
repo = 'thinca/vim-partedit'
on_func = 'partedit#'
hook_add = '''
  nnoremap <Space>i <Cmd>call plugin#partedit#operator_partedit()<CR>

  let g:partedit#prefix_pattern = '\s*'
'''

# https://github.com/4513ECHO/dotfiles/blob/9e043064780a15f8926faeba42b49f8f4358a102/config/nvim/dein/plugin.toml#L456-L472
[[plugins]]
repo = 'Shougo/context_filetype.vim'
on_func = ['context_filetype#get']
hook_source = '''
  let g:context_filetype#filetypes = #{markdown: g:context_filetype#defaults#_filetypes.markdown}
  call add(g:context_filetype#filetypes.markdown, #{
        \   start: '^\s*```\s*viml',
        \   end: '^\s*```$',
        \   filetype: 'vim',
        \ })
  " [plugins.ftplugins] ã®æ›¸å¼ã«ã‚‚å¯¾å¿œã™ã‚‹ãŸã‚è¨­å®šä¸Šæ›¸ã
  let g:context_filetype#filetypes.toml = [#{
        \   start: '\w\+\s*=\s*\(''\{3}\|"\{3}\)',
        \   end: '\1',
        \   filetype: 'vim',
        \ }]

  let g:context_filetype#ignore_patterns = #{
        \   toml: ['^\s*#\s*'],
        \ }
'''

# }}}1  Motion {{{1
[[plugins]]
repo = 'easymotion/vim-easymotion'
on_map = {nxo = '<Plug>'}
hook_add = '''
  "map g/ <Plug>(easymotion-sn)

  " bd: bidirection
  " ?l: current line
  BulkMap nxo <Space>/ <Plug>(easymotion-overwin-f2)
  BulkMap nxo f <Plug>(easymotion-bd-fl)
  BulkMap nxo F <Plug>(easymotion-Fl)
  BulkMap nxo t <Plug>(easymotion-bd-tl)
  BulkMap nxo T <Plug>(easymotion-Tl)

  let g:EasyMotion_move_highlight = 0

  highlight link EasyMotionTarget DiffDelete
'''
hook_source = '''
  let g:EasyMotion_do_mapping = 0
  let g:EasyMotion_keys = 'hlasdgyuiopqwertnmzxcvbfkj;'
  let g:EasyMotion_smartcase = 1
  " PCã‚’æ–°ã—ãã—ãŸã‚‰ãƒã‚·ãªé€Ÿã•ã«ãªã£ãŸã¿ãŸã„
  let g:EasyMotion_use_migemo = 1
  let g:EasyMotion_space_jump_first = 1
  let g:EasyMotion_use_smartsign_us = 1
  let g:EasyMotion_do_shade = 0

  " submode
  call submode#enter_with('emn', 'nx', 'r', ':', '<Plug>(easymotion-next)')
  call submode#enter_with('emn', 'nx', 'r', '<Space>;', '<Plug>(easymotion-next)')
  call submode#enter_with('emn', 'nx', 'r', ',', '<Plug>(easymotion-prev)')
  call submode#map('emn', 'nx', 'rs', ';', '<Plug>(easymotion-next)')
  call submode#map('emn', 'nx', 'rs', ':', '<Plug>(easymotion-next)')
  call submode#map('emn', 'nx', 'rs', ',', '<Plug>(easymotion-prev)')
'''

[[plugins]]
repo = 'haya14busa/vim-edgemotion'
on_map = '<Plug>'
hook_add = '''
  xnoremap <Space>j <Plug>(edgemotion-j)
  xnoremap <Space>k <Plug>(edgemotion-k)
  nnoremap <expr> <Space>j &diff ? ']c' : '<Plug>(edgemotion-j)'
  nnoremap <expr> <Space>k &diff ? '[c' : '<Plug>(edgemotion-k)'
'''

[[plugins]]
repo = 'haya14busa/vim-asterisk'
on_map = '<Plug>'
hook_add = '''
  let g:asterisk#keeppos = 1

  noremap * <Plug>(asterisk-gz*)
  noremap g* <Plug>(asterisk-z*)
  noremap z* <Plug>(asterisk-*)
  noremap gz* <Plug>(asterisk-g*)

  " replace
  noremap # <Plug>(asterisk-gz*)cgn
  noremap g# <Plug>(asterisk-z*)cgn
'''

[[plugins]]
repo = 'hrsh7th/vim-searchx'
on_func = 'searchx#run'
hook_add = '''
  " Overwrite / and ?.
  BulkMap nx ? <Cmd>call searchx#start(#{ dir: 0 })<CR>
  BulkMap nx / <Cmd>call searchx#start(#{ dir: 1 })<CR>
  nnoremap g/ /
  nnoremap gn n
  nnoremap gN N

  " Move to next/prev match.
  BulkMap nx N <Cmd>call searchx#prev_dir()<CR>
  BulkMap nx n <Cmd>call searchx#next_dir()<CR>
  xnoremap <C-k> <Cmd>call searchx#prev()<CR>
  xnoremap <C-j> <Cmd>call searchx#next()<CR>
  cnoremap <expr> <C-k> getcmdtype() ==# ':' ? repeat('<Del>', strchars(getcmdline()[getcmdpos() - 1:])) : '<Cmd>call searchx#prev()<CR>'
  cnoremap <C-j> <Cmd>call searchx#next()<CR>

  " Customize behaviors.
  let g:searchx = {}

  " Auto jump if the recent input matches to any marker.
  let g:searchx.auto_accept = v:true

  " Marker Characters
  let g:searchx.markers = split('JFKLUIONMHYDVCRETGB', '.\zs')

  " Convert search pattern.
  function g:searchx.convert(input) abort
    return a:input !~# '\k' ? ('\V' .. a:input) : (join(split(a:input, ' '), '.\{-}'))
  endfunction

  " auto nohlsearch after cursor is moved.
  " vim-hitspop ã®è¡¨ç¤ºã‚‚æ¶ˆã—ã¦ã‚‚ã‚‰ãˆã‚‹ã®ã§ is.vim ã‚‚å‰Šé™¤ã—ãŸ
  let g:searchx.nohlsearch = {}
  let g:searchx.nohlsearch.jump = v:true
'''

# ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•ä½ç½®ã‚’é¡ã‚‹
[[plugins]]
repo = 'osyo-manga/vim-milfeulle'
hook_add = '''
  " ãƒãƒƒãƒ•ã‚¡å˜ä½ã§ç§»å‹•ä½ç½®ã‚’ä¿å­˜
  let g:milfeulle_default_kind = 'buffer'
  " ä½ç½®ã®ä¿å­˜ã¯ CursorMoved
  let g:milfeulle_enable_CursorHold = 0
  let g:milfeulle_enable_InsertLeave = 0
  autocmd vimrc CursorMoved * MilfeulleOverlay

  nnoremap <C-Left> <Plug>(milfeulle-prev)
  nnoremap <C-Right> <Plug>(milfeulle-next)
'''

[[plugins]]
repo = 'hokorobi/vim-smarthome'
on_map = {nxi = '<Plug>'}
frozen = 1
hook_add = '''
  BulkMap nxi <silent> <Home> <Plug>(smarthome-home)
  BulkMap nxi <silent> <C-a> <Plug>(smarthome-home)
  BulkMap nxi <silent> <M-h> <Plug>(smarthome-home)
  BulkMap nx <silent> <Space>h <Plug>(smarthome-home)
  BulkMap nx <silent> 0 <Plug>(smarthome-home)

  BulkMap nxi <silent> <End> <Plug>(smarthome-end)
  BulkMap nxi <silent> <C-e> <Plug>(smarthome-end)
  BulkMap nxi <silent> <M-l> <Plug>(smarthome-end)
  BulkMap nx <silent> <Space>l <Plug>(smarthome-end)
  BulkMap nx <silent> $ <Plug>(smarthome-end)
'''

[[plugins]]
repo = 'osyo-manga/vim-operator-stay-cursor'
depends = 'vim-operator-user'
on_func = 'operator#stay_cursor#wrapper'
hook_add = '''
  map <expr> y operator#stay_cursor#wrapper("y")
'''

# é…å»¶èª­ã¿è¾¼ã¿ã ã¨å‰å›èµ·å‹•æ™‚ã®ãƒãƒ¼ã‚¯ãŒå¾©å…ƒã•ã‚Œãªã„æ§˜å­
[[plugins]]
repo = 'hokorobi/vim-bookmarks'
#rev = 'hokorobi'
frozen = 1
hook_add = '''
  " bookmark_auto_save_file ãŒç„¡åŠ¹ã«ãªã‚‹ã®ã§ g:bookmark_manage_per_buffer ã¯ 1 ã«ã—ãªã„
  let g:bookmark_auto_save_file = expand('~/_vim/.vim-bookmarks')

  let g:bookmark_sign = '>>'
  let g:bookmark_annotation_sign = '##'

  " ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã‚’é–‹ã„ãŸã‚‰å€™è£œã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã¯é–‰ã˜ã‚‹
  let g:bookmark_auto_close = 1

  let g:bookmark_no_default_key_mappings = 1
  nnoremap mm <Plug>BookmarkToggle
  nnoremap mi <Plug>BookmarkAnnotate
  nnoremap ma <Plug>BookmarkShowAll
  nnoremap <Space>fm <Plug>BookmarkShowAll
  nnoremap mj <Plug>BookmarkNext
  nnoremap mn <Plug>BookmarkNext
  nnoremap mk <Plug>BookmarkPrev
  nnoremap mp <Plug>BookmarkPrev
  nnoremap mc <Plug>BookmarkClear
  nnoremap mx <Plug>BookmarkClearAll
'''

[[plugins]]
repo = 'Allianaab2m/jumpout.vim'
on_func = 'jumpout#'
hook_add = '''
  nnoremap <C-h> <Cmd>call jumpout#jump('h', 'vsplit')<CR>
  nnoremap <C-j> <Cmd>call jumpout#jump('j', 'split')<CR>
  nnoremap <C-k> <Cmd>call jumpout#jump('k', 'split')<CR>
  nnoremap <C-l> <Cmd>call jumpout#jump('l', 'vsplit')<CR>
'''

# }}}1  Buffer {{{1
[[plugins]]
repo = 'hokorobi/vim-sayonara'
on_func = 'sayonara#'
frozen = 1
hook_add = '''
  noremap <expr> qq printf('<Cmd>%s<CR>', &diff ? 'diffoff' : 'call sayonara#sayonara(v:true)')
'''
hook_source = '''
  let g:sayonara_filetypes.qf = 'bdelete'
  let g:sayonara_filetypes.help = 'bdelete!'
'''

[[plugins]]
repo = 'tyru/closesubwin.vim'
on_func = 'closesubwin#'
hook_add ='''
  nnoremap <Space>q <Cmd>call closesubwin#close_sub_window()<CR>
'''

[[plugins]]
repo = 'tyru/capture.vim'
on_cmd = 'Capture'
hook_add = '''
  call extend(g:vimrc_altercmd_dic, {
        \   'cap[ture]': 'Capture',
        \ })
'''
hook_source = '''
  let g:capture_override_buffer = 'replace'

  " Sayonara
  let g:sayonara_filetypes.capture = 'bdelete'
'''

# }}}1  File {{{1
[[plugins]]
repo = 'kana/vim-gf-user'
on_map = {n = 'gf'}
hook_source = '''
  " Windows ã§ã‚‚è¡Œæ•°æŒ‡å®šã®è¨˜è¿°ã‚’ gf ã§é–‹ã‘ã‚‹ã‚ˆã†ã«ã™ã‚‹
  " http://thinca.hatenablog.com/entry/20140324/1395590910
  call gf#user#extend('plugin#gfUser#file', 1000)
'''

# diff ã§ã‚‚ gf ã‚’å¯èƒ½ã«ã™ã‚‹
[[plugins]]
repo = 'kana/vim-gf-diff'
on_ft = 'diff'
depends = 'vim-gf-user'

[[plugins]]
# FIXME: é…å»¶èª­è¾¼è¨­å®šã‚’ã—ã¦ã„ã‚‹å ´åˆã€èµ·å‹•å¾Œã®åˆå›å®Ÿè¡Œæ™‚ã«ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ãŒäºŒé‡ã«è¡¨ç¤ºã•ã‚Œã‚‹
#        ãƒ•ã‚¡ã‚¤ãƒ«æœ«å°¾ã«ãƒ•ã‚¡ã‚¤ãƒ«ã®å…ˆé ­ã‹ã‚‰ã®å†…å®¹ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚æœ¬å½“ã«å…ˆé ­ã‹ã‚‰ã§ã¯ãªã2è¡Œç›®ã‹ã‚‰ã®æ§˜å­
#        sample: :e https://raw.githubusercontent.com/Mathiasb17/mathias/f3ad028eafcc56ddd4d72019cb6a1818e456d099/.config/nvim/init.vim
repo = 'lambdalisue/vim-protocol'

[[plugins]]
repo = 'mattn/vim-findroot'
on_event = 'BufRead'
hook_source = '''
  let g:findroot_not_for_subdir = 0
'''

[[plugins]]
repo = 'chrisbra/Recover.vim'

# }}}1  Terminal {{{1
# terminal ä¸Šã§ã€æœªå…¥åŠ›æ™‚ã« ESC, : ãŒåŠ¹ãã‚ˆã†ã«ã™ã‚‹
[[plugins]]
repo = 'tyru/empty-prompt.vim'
on_event = 'TerminalOpen'
hook_source = '''
  " let g:empty_prompt#pattern = get(g:, 'empty_prompt#pattern', &shell =~# 'sh$' ? '\$ $' : '\S>\s*$')
  " Use nyagos
  " let g:empty_prompt#pattern = '\$ $'

  " Enter command-line / normal-mode if current line is empty prompt
  function! s:empty_prompt_mappings() abort
    call empty_prompt#map(#{lhs: ';', rhs: "<C-w>:"})
    call empty_prompt#map(#{lhs: '<Esc>', rhs: "<C-w>N"})
  endfunction
  autocmd vimrc TerminalOpen * ++once call s:empty_prompt_mappings()
'''

[[plugins]]
repo = 'voldikss/vim-floaterm'
on_cmd = 'FloatermNew'
on_func = 'floaterm#'
hook_add = '''
  nnoremap <expr> <M-t> printf('<Cmd>%s<CR>', floaterm#buflist#first() == -1 ? 'FloatermNew' : 'FloatermToggle')
'''
hook_source = '''
  " exit ã—ã¦ã‚‚ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãŒæ®‹ã‚‹ã¨é–‰ã˜ãªã„ã¨ã„ã‘ãªã„ã®ã§
  let g:floaterm_autoclose = 1

  autocmd vimrc User FloatermOpen tnoremap <buffer> <silent> <M-t> <Cmd>FloatermToggle<CR>
  autocmd vimrc User FloatermOpen tnoremap <buffer> <silent> <C-t> <Cmd>FloatermNew<CR>
  autocmd vimrc User FloatermOpen tnoremap <buffer> <silent> <C-k> <Cmd>FloatermPrev<CR>
  autocmd vimrc User FloatermOpen tnoremap <buffer> <silent> <C-j> <Cmd>FloatermNext<CR>

  autocmd vimrc QuitPre * FloatermKill!
'''

# }}}1  CtrlP {{{1
[[plugins]]
repo = 'ctrlpvim/ctrlp.vim'
hook_add = '''
  let g:ctrlp_map = '<Nop>'

  " å€™è£œã®æ®‹ã‚Šã«ã‚ã‚ã›ã¦ãƒªã‚µã‚¤ã‚ºã—ãªã„
  let g:ctrlp_match_window = 'bottom,order:btt,min:2,max:20'

  " Guess vcs root dir
  let g:ctrlp_working_path_mode = 'ra'

  " Open current window
  let g:ctrlp_open_new_file = 'r'
  let g:ctrlp_open_multiple_files = 'r'

  " cache files directory
  let g:ctrlp_cache_dir = expand('~/_vim/.ctrlp')

  let g:ctrlp_switch_buffer = 0

  let g:ctrlp_regexp = 0

  " exculde mru
  let g:ctrlp_mruf_exclude = '^C:\\Users\\.*\\AppData\\Local\\Temp\\.*'

  let g:ctrlp_custom_ignore = #{
    \ dir:  '\v[\/](\.(bzr|git|hg|svn)|node_modules|_venv)$',
    \ file: '\v\.(dll|exe|so)$',
    \ link: 'SOME_BAD_SYMBOLIC_LINKS',
    \ }

  " mapping
  let g:ctrlp_prompt_mappings = {
        \ 'AcceptSelection("e")': ['<cr>', '<2-LeftMouse>', '<m-m>'],
        \ 'PrtSelectMove("j")'  : ['<c-j>', '<down>', '<m-j>'],
        \ 'PrtSelectMove("k")'  : ['<c-k>', '<up>', '<m-k>'],
        \ 'PrtBS()'             : ['<bs>', '<c-]>', '<c-h>'],
        \ 'PrtCurLeft()'        : ['<c-b>', '<left>', '<c-^>'],
        \ 'ToggleType(-1)'      : ['<c-down>'],
        \ 'PrtCurRight()'       : ['<c-f>', '<c-l>', '<right>'],
        \ 'ToggleType(1)'       : ['<c-up>'],
        \ 'PrtInsert("c")'      : ['<c-v>', '<MiddleMouse>', '<insert>'],
        \ 'PrtDelete()'         : ['<c-d>', '<del>'],
        \ 'PrtDeleteWord()'     : ['<c-q>'],
        \ 'ToggleByFname()'     : ['<F8>'],
        \ 'AcceptSelection("v")': ['<RightMouse>'],
        \ 'PrtDeleteEnt()'      : ['<F7>', '<c-w>'],
        \ }

  " FIXME: <Space>fr ã§å€™è£œãŒå‡ºãªããªã‚‹ã€‚
  " let g:ctrlp_user_command = ['.git', 'git ls-files -co --exclude-standard']

  nnoremap <Space>b  <Cmd>CtrlPBuffer<CR>
  " nnoremap <Space>f/ <Cmd>CtrlPLine<CR>
  nnoremap <Space>fo <Cmd>call plugin#ctrlp#defaultInput('CtrlPLine', '{{{ ')<CR>
  nnoremap <Space>*  <Cmd>call plugin#ctrlp#defaultInput('CtrlPLine', expand('<cword>') .. ' ')<CR>
  xnoremap <Space>*  <Cmd>call plugin#ctrlp#defaultInput('CtrlPLine', vimrc#get_current_selection() .. ' ')<CR>
  nnoremap <Space>u  <Cmd>CtrlPMRUFiles<CR>
  nnoremap <Space>ff <Cmd>CtrlP<CR>
  " nnoremap <Space>fq <Cmd>CtrlPQuickfix<CR>
  " nnoremap <Space>fr <Cmd>call plugin#ctrlp#repository('n')<CR>
  xnoremap <Space>fr <Cmd>call plugin#ctrlp#repository('x')<CR>

  " CtrlP-funky ã ã¨ã‚«ãƒ¬ãƒ³ãƒˆã®ãƒãƒƒãƒ•ã‚¡ã—ã‹å¯¾è±¡ã«ã§ããªã„ã®ã§
  nnoremap <Space>fu <Cmd>call Funcquickfix()<CR>
  function! Funcquickfix() abort
    FuncGrep
    " QuickfixCmdPost ã§ QuickFix ãŒè‡ªå‹•ã§é–‹ãã®ã§é–‰ã˜ã‚‹
    cclose
    CtrlPQuickfix
  endfunction
'''
[plugins.ftplugin]
rst = '''
  nnoremap <buffer> <Space>fo <Cmd>call plugin#ctrlp#defaultInput('CtrlPLine', 'list-table ')<CR>
'''
go = '''
  command! -buffer -nargs=0 FuncGrep :execute 'vimgrep /^\s*func\s\+/j **/*.go'
'''
javascript = '''
  command! -buffer -nargs=0 FuncGrep :execute 'vimgrep /^\s*function\s\+/j **/*.js **/*.js9'
'''
vim = '''
  command! -buffer -nargs=0 FuncGrep :execute 'vimgrep /^\s*fu\%[nction]!\?\s\+\zs[a-zA-Z0-9_#:]\+\ze\s*(/j **/*.vim'
'''
toml = '''
  nnoremap <buffer> <Space>fg <Cmd>call plugin#ctrlp#defaultInput('CtrlPLine', 'repo= ')<CR>
'''

[[plugins]]
repo = 'hokorobi/ctrlp-sessions'
on_cmd = ['CtrlPSession', 'MkS']
hook_add = '''
  " nnoremap <Space>fs <Cmd>CtrlPSessions<CR>
  " call extend(g:vimrc_altercmd_dic, #{ss: 'MkS'})

  let g:ctrlp_session_dir = expand('~/_vim/sessions')
'''

[[plugins]]
repo = 'mattn/ctrlp-launcher'
on_cmd = 'CtrlPLauncher'
hook_add = '''
  let g:ctrlp_launcher_file = expand('~/vimfiles/rc/.ctrlp-launcher')
  nnoremap <Space>fl <Cmd>CtrlPLauncher<CR>
  nnoremap <Space>c <Cmd>CtrlPLauncher cheat<CR>
'''

[[plugins]]
repo = 'zeero/vim-ctrlp-help'
on_cmd = 'CtrlPHelp'
hook_add = '''
  nnoremap <Space>fh <Cmd>CtrlPHelp<CR>

  call extend(g:vimrc_altercmd_dic, #{hh: 'CtrlPHelp'})
'''

[[plugins]]
repo = 'printesoi/ctrlp-filetype.vim'
on_cmd = 'CtrlPFiletype'
hook_add = '''
  nnoremap <Space>ft <Cmd>CtrlPFiletype<CR>
'''

[[plugins]]
repo = 'christoomey/ctrlp-generic'
on_func = 'CtrlPGeneric'
hook_add = '''
  command! -nargs=* CtrlPCmdPaste call CtrlPGeneric(systemlist(<q-args>), 'plugin#ctrlpGeneric#paste')
  nnoremap <Space>fc <Cmd>call CtrlPGeneric(systemlist('ghq list -p'), 'plugin#ctrlpGeneric#cd')<CR>
  " ghq ã‹ã‚‰ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’é¸æŠã—ã¦ã€ãã®ä¸­ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ
  nnoremap <Space>fr <Cmd>call CtrlPGeneric(systemlist('ghq list -p'), 'plugin#ctrlpGeneric#ctrlp')<CR>
  " git log ã‹ã‚‰ã‚³ãƒŸãƒƒãƒˆã‚’é¸æŠã—ã¦ã€ãã®ã‚³ãƒŸãƒƒãƒˆæ™‚ç‚¹ã®ã‚«ãƒ¬ãƒ³ãƒˆãƒãƒƒãƒ•ã‚¡ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã
  nnoremap <Space>gbo <Cmd>call CtrlPGeneric(systemlist('git log --date=short --pretty=format:"%h %cd %s"'), 'plugin#ctrlpGeneric#ginEdit')<CR>
'''

[[plugins]]
repo = 'hokorobi/ctrlp-filter'
on_func = 'ctrlp#filter#do'
frozen = 1
hook_add = '''
  nnoremap <Space>fn <Cmd>call ctrlp#filter#do('CtrlP')<CR>
'''
[plugins.ftplugin]
rst = '''
  nnoremap <buffer> <Space>fn <Cmd>call ctrlp#filter#do('CtrlP', #{filtermethods: ['substitute', 'printf'], methodsargs: #{substitute: ['\\', '/', 'g'], printf: ['.. figure:: %s']}})<CR>
'''

[[plugins]]
repo = 'suy/vim-ctrlp-commandline'
hook_add = '''
  nnoremap <Space>f; <Cmd>call ctrlp#init(ctrlp#commandline#id())<CR>
'''

[[plugins]]
repo = 'mattn/ctrlp-matchfuzzy'
hook_add = '''
  let g:ctrlp_match_func = #{match: 'ctrlp_matchfuzzy#matcher'}
'''

[[plugins]]
repo = 'ompugao/ctrlp-kensaku'
depends = ['denops.vim', 'kensaku.vim']
on_cmd = 'CtrlPKensaku'
hook_add = '''
  nnoremap <Space>f/ <Cmd>CtrlPKensaku 'CtrlPLine'<CR>
  nnoremap <Space>fq <Cmd>CtrlPKensaku 'CtrlPQuickfix'<CR>
'''
hook_source = '''
  function! s:kensaku(ctrlp) abort
    let l:oldmatcher = g:ctrlp_match_func
    let g:ctrlp_match_func = {'match': 'ctrlp_kensaku#matcher'}
    execute(a:ctrlp)
    let g:ctrlp_match_func = l:oldmatcher
  endfunction
  command! -nargs=1 CtrlPKensaku call <SID>kensaku(<args>)
'''

[[plugins]]
repo = 'lambdalisue/kensaku.vim'
lazy = 1

# }}}1  Git {{{1
[[plugins]]
repo = 'lambdalisue/gina.vim'
on_cmd = 'Gina'
hook_add = '''
  " é–‹ã„ã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã€é¸æŠè¡Œã‚’ Github ã§é–‹ã
  BulkMap nx <Space>oG <Cmd>Gina browse :<CR>

  nnoremap <Space>gbl <Cmd>Gina blame<CR>
  nnoremap <Space>gg :Gina log -p -G""<Left>
  " nnoremap <Space>gD <Cmd>Gina diff --opener=tabnew<CR>
  " nnoremap <Space>gl <Cmd>Gina log --all --graph -100 --oneline<CR>
  " nnoremap <Space>gL <Cmd>Gina log --all --patch --graph -100<CR>
  " æŒ‡å®šã—ãŸã‚³ãƒŸãƒƒãƒˆã€ãƒ–ãƒ©ãƒ³ãƒã®ãƒãƒƒãƒ•ã‚¡ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¡¨ç¤ºã€‚
  " FIXME: ã“ã‚Œã ã¨ Gina ã®èª­ã¿è¾¼ã¿ãŒã•ã‚Œãªã„ã€‚
  " call util#addLeft('nnoremap <Space>gbo :Gina compare --opener="tab vsplit" ', ':%')

  call extend(g:vimrc_altercmd_dic, {
        \   'bro\%[wse]': 'Gina browse --exact :',
        \ })

  let g:sayonara_filetypes['gina-blame'] = 'tabclose'
  let g:sayonara_filetypes['gina-diff'] = 'tabclose'
  let g:sayonara_filetypes['gina-log'] = 'bdelete'

  call extend(g:vimrc_altercmd_dic, #{
        \   gina: 'Gina',
        \ })
'''
hook_source = '''
  " alias
  call gina#custom#command#alias('status', 'st')
  call gina#custom#command#option('st', '-s')
  " call gina#custom#command#option('status', '--opener', 'split')

  call gina#custom#command#alias('branch', 'b')

  call gina#custom#command#alias('log', 'gl')
  call gina#custom#command#option('gl', '--graph')

  " key mapping
  call gina#custom#mapping#nmap('status', 'cc', ':<C-u>Gina commit -v --group=status<CR>', #{noremap: 1, silent: 1, buffer: 1, nowait: 1})
  " show ã‹ã‚‰æˆ»ã‚‹ã¨ãã¯ <C-o>
  call gina#custom#mapping#nmap('blame', 's', ':<C-u>Gina show<CR>', #{noremap: 1, silent: 1, buffer: 1, nowait: 1})
  call gina#custom#mapping#nmap('blame', 'e', '<Plug>(gina-blame-echo)', #{noremap: 0, buffer: 1, nowait: 1})
  " copy revision
  call gina#custom#mapping#nmap('log', 'yr', '<Plug>(gina-yank-rev)', #{noremap: 0, buffer: 1, nowait: 1})

  " vim-jp 2021-03-12 obcat
  " PR ã‚’ä½œæˆã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã€‚ä¸€å¿œæ›¸ç½®ãã€‚
  " command! -nargs=? PR Gina browse --scheme=pr <args>
  " nnoremap <leader>aw :PR<CR>
  " call extend(g:gina#command#browse#translation_patterns['github\.com'][1], #{pr: 'https://\1/\2/\3/pull/new/%c0'})
'''

# [[plugins]]
# repo = 'kuuote/gina-preview.vim'
# depends = 'gina.vim'
# on_cmd = 'GinaPreview'
# hook_add = '''
#   nnoremap <Space>gS <Cmd>GinaPreview<CR>
# '''

[[plugins]]
repo = 'lambdalisue/gin.vim'
on_cmd = ['Gin', 'GinBranch', 'GinBuffer', 'GinChaperon', 'GinDiff', 'GinEdit', 'GinLog', 'GinPatch', 'GinStatus']
depends = 'denops.vim'
hook_add = '''
  call extend(g:vimrc_altercmd_dic, #{
        \   gin: 'Gin',
        \ })

  nnoremap <Space>gbr <Cmd>GinBranch --all<CR>
  nnoremap <Space>gD <Cmd>GinDiff ++opener=tabnew<CR>
  nnoremap <Space>gl <Cmd>GinLog ++opener=tabnew --all --graph --max-count=100 --oneline --decorate<CR>
  nnoremap <Space>gL <Cmd>GinLog --all --patch --graph --max-count=100<CR>
  nnoremap <Space>gaD <Cmd>GinPatch ++opener=tabnew %<CR>
  " æŒ‡å®šã—ãŸã‚³ãƒŸãƒƒãƒˆã€ãƒ–ãƒ©ãƒ³ãƒã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¡¨ç¤ºã€‚
  " call util#addLeft('nnoremap <Space>gbo :GinEdit ++opener=vsplit ', ' %')
'''
hook_source = '''
  " !git ã®å‹•ä½œã«æ”¯éšœã‚’ããŸã™ãŸã‚ç’°å¢ƒå¤‰æ•° GIT_EDITOR ã®æ›¸ãæ›ãˆã‚’ç¦æ­¢
  let g:gin_proxy_disable_editor = v:true

  " Sayonara
  let g:sayonara_filetypes.gin = 'bdelete'

  function! GinCR()
    if v:count > 0
      execute printf('normal! %iG', v:count)
    else
      execute join(['!git show -r', expand('<cword>')])
    endif
  endfunction
'''
[plugins.ftplugin]
gin = '''
  nnoremap <buffer> <CR> <Cmd>call GinCR()<CR>
  nnoremap <expr><buffer> <Space><CR> printf('<Cmd>GinBuffer show ++opener=split -r %s<CR>', expand('<cword>'))
'''
gitcommit = '''
  nnoremap <buffer> <Space>gl <Cmd>GinLog ++opener=vsplit --max-count=100 --oneline --decorate<CR>
'''

[[plugins]]
repo = 'kuuote/gin-preview.vim'
depends = 'gin.vim'
frozen = 1
on_cmd = 'GinPreview'
hook_add = '''
  nnoremap <Space>gS <Cmd>GinPreview<CR>
'''

[[plugins]]
repo = 'cohama/agit.vim'
on_cmd = 'Agit'
hook_source = '''
  " Sayonara
  let g:sayonara_filetypes.agit = 'tabclose'
  let g:sayonara_filetypes.agit_stat = 'tabclose'
  let g:sayonara_filetypes.agit_diff = 'tabclose'
'''

[[plugins]]
repo = 'hotwatermorning/auto-git-diff'
on_ft = 'gitrebase'

# GitHub {{{2
[[plugins]]
repo = 'lambdalisue/vim-gista'
on_cmd = 'Gista'
on_map = '<Plug>'
depends = 'open-browser.vim'
hook_add = '''
  let g:gista#client#default_username = 'hokorobi'
  let g:gista#client#cache_dir = '~/_vim/vim-gista'

  call extend(g:vimrc_altercmd_dic, {'gis\%[ta]': 'Gista'})
'''

# }}}2

# }}}1  Utility {{{1
[[plugins]]
repo = 'tyru/open-browser.vim'
on_map = '<Plug>(openbrowser-'
on_func = 'openbrowser#open'
hook_add = '''
  nnoremap <Space>oo <Plug>(openbrowser-open)
  BulkMap nx <Space>o <Plug>(openbrowser-open)

  nnoremap <Space>og <Cmd>call plugin#openBrowser#gitrepo('n')<CR>
  xnoremap <Space>og <Cmd>call plugin#openBrowser#gitrepo('v')<CR>
  nnoremap <Space>ob <Cmd>call plugin#openBrowser#openUrlInBuffer()<CR>
'''

[[plugins]]
repo = 'tyru/open-browser-unicode.vim'
on_cmd = 'OpenBrowserUnicode'
depends = 'open-browser.vim'
hook_add = '''
  nnoremap <Space>ou <Cmd>OpenBrowserUnicode<CR>
'''

[[plugins]]
repo = 'thinca/vim-prettyprint'
on_cmd = 'PP'
hook_add = '''
  let g:prettyprint_width = 78
  let g:prettyprint_indent = 2

  call extend(g:vimrc_altercmd_dic, #{pp: 'PP'})
'''

[[plugins]]
repo = 'kana/vim-operator-user'

[[plugins]]
repo = 'skanehira/code2img.vim'
on_cmd = 'Code2img'

[[plugins]]
repo = 'fedorenchik/VimCalc3'
on_cmd = 'Calc'
hook_source = '''
  " Sayonara
  let g:sayonara_filetypes.vimcalc = 'bdelete'
'''

[[plugins]]
repo = 'kana/vim-submode'
on_source = ['vim-lsp', 'yankround.vim', 'vim-easymotion']
hook_add = '''
  let g:submode_keep_leaving_key = 1
  let g:submode_timeout = 0

  " TODO: submode ã‚’æŠœã‘ã‚‹ã¨ãã« <silent> ã‚’åŠ¹ã‹ã›ãŸã„ã‘ã©æ–¹æ³•ã¯ãªã„ã®ã‹ãªï¼Ÿ

  " tab move
  call submode#enter_with('changetab', 'n', '', 'gt', 'gt')
  call submode#enter_with('changetab', 'n', '', 'gT', 'gT')
  call submode#map('changetab', 'n', '', 't', 'gt')
  call submode#map('changetab', 'n', '', 'T', 'gT')

  " å¤‰æ›´ã—ãŸä½ç½®
  call submode#enter_with('move-change', 'n', '', 'g;', 'g;')
  call submode#enter_with('move-change', 'n', '', 'g,', 'g,')
  call submode#map('move-change', 'n', '', ';', 'g;')
  call submode#map('move-change', 'n', '', ',', 'g,')
  call submode#map('move-change', 'n', '', ':', 'g,')

  " move to next/previous fold
  call submode#enter_with('move-to-fold', 'n', '', 'zj', 'zj')
  call submode#enter_with('move-to-fold', 'n', '', 'zk', 'zk')
  call submode#map('move-to-fold', 'n', '', 'j', 'zj')
  call submode#map('move-to-fold', 'n', '', 'k', 'zk')

  " æ™‚ç³»åˆ— undo/redo
  call submode#enter_with('undo/redo', 'n', '', 'g-', 'g-')
  call submode#enter_with('undo/redo', 'n', '', 'g+', 'g+')
  call submode#map('undo/redo', 'n', '', '-', 'g-')
  call submode#map('undo/redo', 'n', '', '+', 'g+')

  "https://raw.githubusercontent.com/ryotako/dotfiles/52b1ecb275e577dcb44db367a1f563d471c2cab0/.vimrc
  " x é€£æ‰“å‰Šé™¤ã‚’ä¸€ã¤ã® undo ã§æˆ»ã‚‹ã‚ˆã†ã«
  " ãƒ¬ã‚¸ã‚¹ã‚¿ã«ç™»éŒ²ã—ãªã„ "_x
  call submode#enter_with('x', 'n', '', 'x', '"_x')
  call submode#map('x', 'n', 's', 'x', ":<C-u>undojoin <bar> noautocmd normal! \"_x<CR>")

  " Visual ãƒ¢ãƒ¼ãƒ‰æ™‚ã®ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã€ãƒ‡ã‚¯ãƒªãƒ¡ãƒ³ãƒˆ
  " http://vim-jp.org/blog/2015/06/30/visual-ctrl-a-ctrl-x.html
  call submode#enter_with('vinc', 'x', '', '<Space>a', '<c-a>gv')
  call submode#enter_with('vinc', 'x', '', '<Space>x', '<c-x>gv')
  call submode#map('vinc', 'x', '', 'a', '<c-a>gv')
  call submode#map('vinc', 'x', '', 'x', '<c-x>gv')
'''

[[plugins]]
repo = 'vim-jp/vimdoc-ja'

# Vim ã«è¿½åŠ ã•ã‚ŒãŸæ©Ÿèƒ½ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèª
[[plugins]]
repo = 'tweekmonster/helpful.vim'
on_cmd = 'HelpfulVersion'
hook_add = '''
  call extend(g:vimrc_altercmd_dic, {'helpfu\%[lVersion]': 'L HelpfulVersion'})
'''

[[plugins]]
repo = 'rbtnn/vim-layout'
depends = 'ctrlp-generic'
on_func = ['layout#', 'LayoutWrap', 'LayoutCallback']
on_cmd = ['LayoutLoad', 'LayoutSave']
hook_add = '''
  let g:layout_path = '~/_vim/.layout/now.json'

  call extend(g:vimrc_altercmd_dic, #{ss: 'call LayoutWrap()'})

  nnoremap <Space>fs <Cmd>CtrlPLayout<CR>
  command! -nargs=* CtrlPLayout call CtrlPGeneric(glob(fnamemodify(g:layout_path, ':p:h') .. '/*', v:true, v:true), 'LayoutCallback')
'''
hook_source = '''
  function! LayoutWrap() abort
    let str = input('Filename: ', 'now')
    if len(str) == 0
      echo 'Stop LayoutWrap()'
      return 1
    endif
    call layout#save(printf('%s/%s.json', fnamemodify(g:layout_path, ':p:h'), str))
  endfunction

  function! LayoutCallback(selected_value) abort
    call layout#load(a:selected_value)
  endfunction
'''

[[plugins]]
repo = 'vim-denops/denops.vim'
lazy = 1
hook_add = '''
  let g:denops_server_addr = '127.0.0.1:32123'
'''

# }}}1

